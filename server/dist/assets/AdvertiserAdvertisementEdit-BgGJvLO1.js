import{u as C,l as A,a as T,r as g,j as e,B as U,T as b,G as o,b as x,F as d,e as c,f as m,c as F,m as O,S,g as E,h as j,i as f,k as L,n as w}from"./index-BbSp0jrB.js";import{d as I,a as $}from"./CloudDone-CiyyW9sQ.js";function D({ad:s}){C(s!=null&&s.name?`Edit: ${s.name}`:"Advertisement Platform"),A();const a=T(),[t,i]=g.useState({name:"",isActive:!0,linkUrl:"",content:"",image:null,options:{image:!0,textOnly:!0,sidebar:!0,custom:!0}});g.useEffect(()=>{s&&i({...t,name:s.name,isActive:s.isActive,linkUrl:s.linkUrl,content:s.content,options:{image:s.options.image,textOnly:s.options.textOnly,sidebar:s.options.sidebar,custom:s.options.custom}})},[]);const r=l=>{const{name:n,value:p,type:h,checked:v,files:k}=l.target;i(h==="checkbox"?{...t,[n]:v}:h==="file"?{...t,image:k[0]}:{...t,[n]:p})},u=l=>{const{name:n,checked:p}=l.target;i({...t,options:{...t.options,[n]:p}})},y=async l=>{if(l.preventDefault(),!t.options.image&&!t.options.sidebar&&!t.options.custom&&!t.options.textOnly){alert("You must select display type");return}else if((t.options.image||t.options.sidebar||t.options.custom)&&t.image===null){alert("Select image for the advertisement");return}else{!t.options.image&&!t.options.sidebar&&!t.options.custom&&(t.image=null);try{const n=await f.put(`/api/advertiser/campaign/${s.campaign._id}/${s._id}`,t,{headers:{"Content-Type":"multipart/form-data"}});(n==null?void 0:n.status)===200?(L.success(n.data.message),a(-1)):console.error("Failed to fetch quiz details:",n.status)}catch(n){console.log(n)}}};return e.jsxs(U,{children:[e.jsxs(b,{variant:"h6",mb:3,children:["Edit Advertisement: ",s==null?void 0:s.name]}),e.jsx("form",{onSubmit:y,children:e.jsxs(o,{container:!0,spacing:0,children:[e.jsxs(o,{item:!0,xs:12,children:[e.jsx(x,{name:"name",label:"Name",value:t.name,onChange:r,fullWidth:!0,required:!0}),e.jsx(d,{component:"legend",sx:{mt:1},children:"Give a name for your advertisement which is only visible to you"})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx(c,{control:e.jsx(m,{checked:t.isActive,onChange:r,name:"isActive"}),label:"Live"}),e.jsx(d,{component:"legend",sx:{mb:2,mt:0},children:"Uncheck to disable this advertisement"})]}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(F,{component:"fieldset",sx:{mb:2},children:[e.jsx(b,{component:"legend",sx:{mb:-.5,color:"inherit"},children:"Ads display types"}),e.jsx(O,{children:e.jsxs(S,{sx:{width:"100%"},children:[e.jsx(c,{control:e.jsx(m,{checked:t.options.image,onChange:u,name:"image"}),label:"Image + Text"}),e.jsx(c,{control:e.jsx(m,{checked:t.options.textOnly,onChange:u,name:"textOnly"}),label:"Text Only"}),e.jsx(c,{control:e.jsx(m,{checked:t.options.sidebar,onChange:u,name:"sidebar"}),label:"Sidebar"}),e.jsx(c,{control:e.jsx(m,{checked:t.options.custom,onChange:u,name:"custom"}),label:"Custom"}),!t.options.image&&!t.options.sidebar&&!t.options.custom&&!t.options.textOnly&&e.jsx(E,{sx:{mt:-.5,color:"red"},children:"You must select display type"})]})})]})}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx(x,{name:"linkUrl",label:"Link URL",value:t.linkUrl,onChange:r,fullWidth:!0,required:!0}),e.jsx(d,{component:"legend",sx:{mb:2,mt:1},children:"URL of your landing page. This may contain UTM parameters for tracking purpose."})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx(x,{name:"content",label:"Content",value:t.content,onChange:r,fullWidth:!0,required:!0,multiline:!0,minRows:1}),e.jsx(d,{component:"legend",sx:{mb:2,mt:1},children:"Choose the content carefully that describes your ad. This will be visible to site visitors."})]}),(t.options.image||t.options.sidebar||t.options.custom)&&e.jsx(o,{item:!0,xs:12,children:e.jsxs(j,{variant:"contained",component:"label",sx:{mb:2},startIcon:t.image?e.jsx(I,{}):e.jsx($,{}),children:[t.image?"Added":"Upload Image",e.jsx("input",{accept:"image/*",type:"file",hidden:!0,name:"image",onChange:r})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(j,{variant:"contained",color:"primary",type:"submit",children:"Submit"})})]})})]})}function G(){const s=w();let a;return s!=null&&s.status&&s.status===200&&(a=s.data),e.jsx(D,{ad:a})}async function R({params:s}){const{campaignId:a,adId:t}=s;try{return await f.get(`/api/advertiser/campaign/${a}/${t}`)}catch(i){return i.response||i}}export{G as default,R as loader};
