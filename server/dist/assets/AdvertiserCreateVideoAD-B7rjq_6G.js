import{l as y,u as b,a as C,r as d,j as e,T as k,G as t,b as x,F as c,h,i as U,k as r}from"./index-Dyk33bAm.js";import{d as A,a as D}from"./CloudDone-kxTCAjuK.js";function I(){const{campaignId:m}=y();b("Create Video AD");const i=C(),[u,f]=d.useState(!0);d.useEffect(()=>{u||i("/auth/login")},[u,i]);const[s,p]=d.useState({name:"",isActive:!0,linkUrl:"",video:null}),o=l=>{const{name:n,value:a,type:v,files:j}=l.target;p(v==="file"?{...s,video:j[0]}:{...s,[n]:a})},g=async l=>{var n;if(l.preventDefault(),s.name===""||s.linkUrl==="")alert("Please fill all the field");else if(!s.video)alert("Please add video");else try{const a=await U.post(`/api/advertiser/campaign/${m}/createvideoad`,s,{headers:{"Content-Type":"multipart/form-data"}});(a==null?void 0:a.status)===201?(r.success(a.data.message),i(`/advertiser/campaings/${m}`)):console.error(a)}catch(a){console.log(a),(n=a==null?void 0:a.response)!=null&&n.status&&(a.response.status===401||a.response.status===403?(r.error(a.response.data.message),r.error("Login again"),localStorage.removeItem("token"),f(!1)):a.response.status===400&&r.success(a.response.data.message))}};return e.jsxs(e.Fragment,{children:[e.jsx("center",{children:e.jsx(k,{variant:"h6",mb:3,children:"Create Video AD"})}),e.jsx("form",{onSubmit:g,children:e.jsxs(t,{container:!0,spacing:0,children:[e.jsxs(t,{item:!0,xs:12,children:[e.jsx(x,{name:"name",label:"Name",value:s.name,onChange:o,fullWidth:!0,required:!0}),e.jsx(c,{component:"legend",sx:{mt:1},children:"Give a name for your advertisement which is only visible to you"})]}),e.jsxs(t,{item:!0,xs:12,children:[e.jsx(x,{name:"linkUrl",label:"Link URL",value:s.linkUrl,onChange:o,fullWidth:!0,required:!0}),e.jsx(c,{component:"legend",sx:{mb:2,mt:1},children:"URL of your landing page. This may contain UTM parameters for tracking purpose."})]}),e.jsxs(t,{item:!0,xs:12,children:[e.jsxs(h,{variant:"contained",component:"label",startIcon:s.video?e.jsx(A,{}):e.jsx(D,{}),children:[s.video?"Added":"Upload video",e.jsx("input",{type:"file",hidden:!0,name:"video",onChange:o})]}),e.jsx(c,{component:"legend",sx:{mb:2,mt:1}})]}),e.jsx(t,{item:!0,xs:12,children:e.jsx(h,{variant:"contained",color:"primary",type:"submit",children:"Submit"})})]})})]})}function F(){return e.jsx(e.Fragment,{children:e.jsx(I,{})})}export{F as default};
